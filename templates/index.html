<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Instagram Hashtag Scraper</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
/* Global */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg,#fdfbfb,#ebedee);
    margin: 0;
    color: #333;
}
header {
    background:#833ab4;
    background: linear-gradient(135deg,#fd1d1d,#833ab4,#fcb045);
    color:#fff;
    padding:1.5rem;
    text-align:center;
    box-shadow:0 4px 6px rgba(0,0,0,0.1);
    font-size:1.5rem;
    font-weight:600;
}
.container {
    max-width:900px;
    margin:2rem auto;
    background:#fff;
    padding:2rem;
    border-radius:12px;
    box-shadow:0 6px 20px rgba(0,0,0,0.08);
}
input {
    padding:.6rem 1rem;
    width:65%;
    border:1px solid #ccc;
    border-radius:6px;
    font-size:1rem;
    outline:none;
    transition:0.2s;
}
input:focus{
    border-color:#833ab4;
    box-shadow:0 0 5px rgba(131,58,180,0.3);
}
button {
    padding:.6rem 1.5rem;
    font-size:1rem;
    background:#833ab4;
    color:#fff;
    border:none;
    border-radius:6px;
    cursor:pointer;
    transition:0.3s;
}
button:hover{
    background:#fd1d1d;
}
#loader{
    display:none;
    text-align:center;
    font-size:1.2rem;
    margin:1rem 0;
}
#results-grid {
    display:grid;
    grid-template-columns: repeat(auto-fit,minmax(250px,1fr));
    gap:1rem;
    margin-top:1.5rem;
}
.result-card {
    padding:1rem 1.2rem;
    border-radius:10px;
    background:#f9f9f9;
    box-shadow:0 4px 12px rgba(0,0,0,0.05);
    transition:0.3s;
}
.result-card:hover{
    transform:translateY(-4px);
    box-shadow:0 8px 25px rgba(0,0,0,0.12);
}
.username{
    font-weight:700;
    color:#833ab4;
    margin-bottom:.5rem;
    font-size:1.1rem;
}
.phone, .bio{
    color:#555;
    font-size:0.95rem;
    margin-bottom:.3rem;
}
#notification{
    position:fixed;
    top:20px;
    right:20px;
    padding:1rem 1.2rem;
    color:#fff;
    border-radius:8px;
    display:none;
    font-weight:500;
    box-shadow:0 4px 12px rgba(0,0,0,0.15);
    z-index:999;
}
#notification.show{
    display:block;
    animation:fadeIn 0.4s ease-in-out;
}
@keyframes fadeIn{
    from{opacity:0; transform:translateY(-10px);}
    to{opacity:1; transform:translateY(0);}
}
</style>
</head>
<body>

<header>Instagram Hashtag Scraper</header>

<div class="container">
    <div style="display:flex;gap:0.5rem;flex-wrap:wrap;">
        <input type="text" id="hashtag-input" placeholder="Enter hashtag (no #)">
        <button id="search-btn">Search</button>
    </div>
    <div id="loader">‚è≥ Searching...</div>
    <div id="results-container"><div id="results-grid"></div></div>
</div>

<div id="notification"></div>

<script>
const API_URL="/scrape";
const searchBtn = document.getElementById('search-btn');
const input = document.getElementById('hashtag-input');
const loader = document.getElementById('loader');
const grid = document.getElementById('results-grid');
const notification = document.getElementById('notification');

function showNotification(msg,type='success'){
    notification.textContent=msg;
    notification.style.background = type==='success'?'#333':'#E1306C';
    notification.classList.add('show');
    setTimeout(()=>notification.classList.remove('show'),3000);
}

async function searchHashtag(){
    const hashtag=input.value.trim();
    if(!hashtag){ showNotification('Please enter a hashtag','error'); return; }
    loader.style.display='block';
    grid.innerHTML='';
    try{
        const res=await fetch(API_URL,{
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body:JSON.stringify({hashtag, limit:10})
        });
        if(!res.ok){ const errText=await res.text(); throw new Error(`HTTP ${res.status}: ${errText}`); }
        const data=await res.json();
        if(Array.isArray(data)){
            if(data.length===0) showNotification('No results found','error');
            data.forEach(item=>{
                const card=document.createElement('div'); 
                card.className='result-card';
                card.innerHTML=`
                    <div class="username">@${item.Username}</div>
                    <div class="phone"><i class="fas fa-phone"></i> ${item["Phone Numbers"]||'N/A'}</div>
                    <div class="bio">${item.Bio||'No bio available'}</div>
                `;
                grid.appendChild(card);
            });
            showNotification(`Found ${data.length} results for #${hashtag}`);
        } else if(data.error){ showNotification(data.error,'error'); }
    } catch(err){ console.error(err); showNotification('Error fetching data','error'); }
    finally{ loader.style.display='none'; }
}

searchBtn.addEventListener('click',searchHashtag);
input.addEventListener('keypress',e=>{ if(e.key==='Enter') searchHashtag(); });
</script>

</body>
</html>
