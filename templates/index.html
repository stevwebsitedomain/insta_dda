
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Instagram Scraper</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
body { font-family: Arial; background:#f4f4f4; margin:0; }
header{ background:#333;color:#fff;padding:1rem;text-align:center;}
.container{ max-width:900px;margin:2rem auto;background:#fff;padding:1rem;border-radius:8px; }
input{ padding:.5rem;width:70%; margin-right:.5rem;}
button{ padding:.5rem 1rem;cursor:pointer;}
#loader{ display:none;margin:1rem 0;}
.result-card{ padding:1rem;border:1px solid #ddd;margin-bottom:1rem;border-radius:5px;background:#fafafa;}
.username{ font-weight:bold;}
.phone, .bio{ color:#555; }
#notification{ position:fixed; top:20px; right:20px; padding:1rem;color:#fff;border-radius:5px; display:none;}
#notification.show{ display:block;}
</style>
</head>
<body>

<header><h1>Instagram Hashtag Scraper</h1></header>

<div class="container">
<input type="text" id="hashtag-input" placeholder="Enter hashtag (no #)">
<button id="search-btn">Search</button>
<div id="loader">‚è≥ Searching...</div>
<div id="results-container"><div id="results-grid"></div></div>
</div>

<div id="notification"></div>

<script>
const API_URL="/scrape";
const searchBtn = document.getElementById('search-btn');
const input = document.getElementById('hashtag-input');
const loader = document.getElementById('loader');
const grid = document.getElementById('results-grid');
const notification = document.getElementById('notification');

function showNotification(msg,type='success'){ notification.textContent=msg; notification.style.background = type==='success'?'#333':'#E1306C'; notification.classList.add('show'); setTimeout(()=>notification.classList.remove('show'),3000); }

async function searchHashtag(){
    const hashtag=input.value.trim();
    if(!hashtag){ showNotification('Please enter a hashtag','error'); return; }
    loader.style.display='block';
    grid.innerHTML='';
    try{
        const res=await fetch(API_URL,{ method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({hashtag, limit:10}) });
        if(!res.ok){ const errText=await res.text(); throw new Error(`HTTP ${res.status}: ${errText}`); }
        const data=await res.json();
        if(Array.isArray(data)){
            if(data.length===0) showNotification('No results found','error');
            data.forEach(item=>{
                const card=document.createElement('div'); card.className='result-card';
                card.innerHTML=`<div class="username">@${item.Username}</div><div class="phone"><i class="fas fa-phone"></i> ${item["Phone Numbers"]||'N/A'}</div><div class="bio">${item.Bio||'No bio available'}</div>`;
                grid.appendChild(card);
            });
            showNotification(`Found ${data.length} results for #${hashtag}`);
        } else if(data.error){ showNotification(data.error,'error'); }
    } catch(err){ console.error(err); showNotification('Error fetching data','error'); }
    finally{ loader.style.display='none'; }
}

searchBtn.addEventListener('click',searchHashtag);
input.addEventListener('keypress',e=>{ if(e.key==='Enter') searchHashtag(); });
</script>
</body>
</html>
